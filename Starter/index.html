<!DOCTYPE html>
<html>

<head>
    <title>My Starter Website</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="main.css">
</head>

<body onload="quickTransition(false)">
    <div id="mySidenav" class="sidenav">
        <a href="#">About</a>
        <a href="#">Services</a>
        <a href="#">Clients</a>
        <a href="#">Contact</a>
    </div>
    <div id="leftCol">
        <div class="iconContainer" onclick="iconTransition(this)" onmouseenter="iconHover(this)" onmouseleave="iconHover(this)">
            <div class="bar1" id="bar1"></div>
            <div class="gap"></div>
            <div class="bar2"></div>
            <div class="gap"></div>
            <div class="bar3"></div>
        </div>
    </div>
    <div id="main" class="main" onscroll="quickTransition(true)">
        <div id="background"></div>
        <div id="text" class="text">
            <div id="content" class="content">
                <h1 id="top">This is my base title</h1>
                <h2>This is my secondary title</h2>
                <p>
                    Lego Star Wars is a Lego theme that incorporates the Star Wars saga and franchise. Originally it was only licensed from 1999 to 2008, but The Lego Group extended the license with Lucasfilm, first until 2011, then until 2016,then again until 2022.[2] The brand has spawned an eponymous video game series containing six video games, developed by Traveller's Tales: Lego Star Wars: The Video Game (2005), Lego Star Wars II: The Original Trilogy (2006), Lego Star Wars: The Complete Saga (2007), Lego Star Wars III: The Clone Wars (2011), Lego Star Wars: The Force Awakens (2016) and Lego Star Wars: The Skywalker Saga (2022). Many short films and miniseries have also been produced.
                    Here is a <a href="cities.html">list</a> of cities where you can find us.
                </p>

                <img src="images/background.png" />
                <p></p>
                <video controls>
                    <source src="videos/transcriber.mp4" type="video/mp4">
                </video>
                <img src="images/background.png" />
                <p></p>
                <video controls>
                    <source src="videos/transcriber.mp4" type="video/mp4">
                </video>
                <img src="images/background.png" />
                <p></p>
                <video controls>
                    <source src="videos/transcriber.mp4" type="video/mp4">
                </video>
                <img src="images/background.png" />
                <p></p>
                <video controls>
                    <source src="videos/transcriber.mp4" type="video/mp4">
                </video>
                <img src="images/background.png" />
                <p></p>
                <video controls>
                    <source src="videos/transcriber.mp4" type="video/mp4">
                </video>
                <img src="images/background.png" />
                <p></p>
                <video controls>
                    <source src="videos/transcriber.mp4" type="video/mp4">
                </video>

                <p></p>
            </div>
            <footer>
                <div id="footerInner" class="footerInner">
                    <p id="bottom">
                        Author: Matthew Hill <br><br>
                        <a href="mailto:mhill13g@gmail.com">mhill13g@gmail.com</a> <br><br>
                        123456789101112131415161718192021222324252627282930abcdefghijklmnopqrstuvwxyz123456789101112131415161718192021222324252627282930abcdefghijklmnopqrstuvwxyz123456789101112131415161718192021222324252627282930abcdefghijklmnopqrstuvwxyz
                    </p>
                </div>
            </footer>
        </div>
    </div>

    <script>
        // On resize, instantly move the sidenav and background appropriately for the screen
        window.onresize = quickTransition;

        // Variable to store the width of the sidenav in viewpoint width (vw)
        var navWidth = 0;

        // Toggle the hamburger icon, the sidenav appearance, and adjust the background's position and size
        function iconTransition(x) {
            // Set all transitions to be smooth
            document.getElementById("mySidenav").style.transitionDuration = "var(--transSpeed)"
            document.getElementById("background").style.transitionDuration = "var(--transSpeed)"

            // Toggle between hamburger and cross icon
            x.classList.toggle("change");
            if (navWidth) navWidth = 0;
            else navWidth = 15;

            // Move sizenav and background
            sidePanelMove();
            moveBackground();
        }

        // Instantly setup the backgruond and, if not for scrolling, the sidenav
        // Called when scrolling, window resize, or window onload
        function quickTransition(isScroll) {
            // Set all transitions to be instant
            document.getElementById("mySidenav").style.transitionDuration = "0s"
            document.getElementById("background").style.transitionDuration = "0s"
            if (!isScroll) sidePanelMove();
            moveBackground();
        }

        // Toggle the sidenav to its new navWidth, and adjust all other object accordingly
        function sidePanelMove() {
            document.getElementById("mySidenav").style.width = navWidth + "vw";
            document.getElementById("background").style.left = navWidth + "vw";
            document.getElementById("background").style.width = (100 - navWidth) + "vw";
            document.getElementById("content").style.marginLeft = (9 + (0.5 * navWidth)) + "vw";
            document.getElementById("footerInner").style.marginLeft = (9 + (0.5 * navWidth)) + "vw";
            document.getElementById("leftCol").style.marginLeft = (0.7 * navWidth) + "vw";
        }

        // Toggle the color of the hamburger / cross icon when hovered over
        function iconHover(x) {
            if (navWidth) {
                if (x.classList.contains("blue")) x.classList.remove("blue");
                else x.classList.toggle("white");
            }
            else {
                if (x.classList.contains("white")) x.classList.remove("white");
                else x.classList.toggle("blue");
            }
        }

        // Alter background such that it slides with the sidebar and adjusts its dimensions smoothly
        function moveBackground() {
            let img = new Image();
            img.src = getComputedStyle(document.getElementById("background")).getPropertyValue("background-image").slice(4, -1).replace(/"/g, "");
            let imgWidth = img.width;
            let imgHeight = img.height;

            let main = document.getElementById("main");
            let mainHeight = main.offsetHeight;
            let mainWidth = window.innerWidth * ((100 - navWidth) / 100);

            let actualImgHeight = imgHeight * mainWidth / imgWidth;

            let txtHeight = document.getElementById("main").scrollHeight;

            let scrollH = main.scrollTop;
            let speed = (actualImgHeight - mainHeight) / (txtHeight - mainHeight);
            let bgTop = scrollH * speed;

            document.getElementById("background").style.width = (100 - navWidth) + "vw";
            document.getElementById("background").style.top = "-" + bgTop + "px";
        }

    </script>
</body>

</html>